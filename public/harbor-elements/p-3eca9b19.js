import{r as n}from"./p-f986f79b.js";import{b as t,_ as r}from"./p-d77427db.js";import{c as i}from"./p-429acd5f.js";import{t as u}from"./p-53cd60da.js";import{_ as e}from"./p-b6499249.js";import{L as o,N as a,O as f,Y as c,$ as s,a0 as l,a1 as v,a2 as d,a3 as h,a4 as m,a5 as y,a6 as M,a7 as x,a8 as p,a9 as b,aa as g,ab as w,ac as k,ad as D,ae as j,af as A,ag as P,ah as N,ai as S,aj as F,ak as T,x as z,al as E,am as O,an as $,V as X,j as Y,a as B,e as V,v as C,u as I,p as R,ao as _,K as q}from"./p-f24d3984.js";import{_ as L,u as U}from"./p-8402fea6.js";import{s as G}from"./p-956c2a9c.js";function H(n,t,r){n=+n,t=+t,r=(u=arguments.length)<2?(t=n,n=0,1):u<3?1:+r;for(var i=-1,u=0|Math.max(0,Math.ceil((t-n)/r)),e=new Array(u);++i<u;)e[i]=n+i*r;return e}function K(){var n,t,r=a().unknown(void 0),i=r.domain,u=r.range,e=0,f=1,c=!1,s=0,l=0,v=.5;function d(){var r=i().length,o=f<e,a=o?f:e,d=o?e:f;n=(d-a)/Math.max(1,r-s+2*l),c&&(n=Math.floor(n)),a+=(d-a-n*(r-s))*v,t=n*(1-s),c&&(a=Math.round(a),t=Math.round(t));var h=H(r).map((function(t){return a+n*t}));return u(o?h.reverse():h)}return delete r.unknown,r.domain=function(n){return arguments.length?(i(n),d()):i()},r.range=function(n){return arguments.length?([e,f]=n,e=+e,f=+f,d()):[e,f]},r.rangeRound=function(n){return[e,f]=n,e=+e,f=+f,c=!0,d()},r.bandwidth=function(){return t},r.step=function(){return n},r.round=function(n){return arguments.length?(c=!!n,d()):c},r.padding=function(n){return arguments.length?(s=Math.min(1,l=+n),d()):s},r.paddingInner=function(n){return arguments.length?(s=Math.min(1,n),d()):s},r.paddingOuter=function(n){return arguments.length?(l=+n,d()):l},r.align=function(n){return arguments.length?(v=Math.max(0,Math.min(1,n)),d()):v},r.copy=function(){return K(i(),[e,f]).round(c).paddingInner(s).paddingOuter(l).align(v)},o.apply(d(),arguments)}function Z(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return Z(t())},n}function J(n,t){var r,i=0,u=(n=n.slice()).length-1,e=n[i],o=n[u];return o<e&&(r=i,i=u,u=r,r=e,e=o,o=r),n[i]=t.floor(e),n[u]=t.ceil(o),n}function Q(n){return Math.log(n)}function W(n){return Math.exp(n)}function nn(n){return-Math.log(-n)}function tn(n){return-Math.exp(-n)}function rn(n){return isFinite(n)?+("1e"+n):n<0?0:n}function un(n){return function(t){return-n(-t)}}function en(n){var t,r,i=n(Q,W),u=i.domain,e=10;function o(){return t=function(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}(e),r=function(n){return 10===n?rn:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}(e),u()[0]<0?(t=un(t),r=un(r),n(nn,tn)):n(Q,W),i}return i.base=function(n){return arguments.length?(e=+n,o()):e},i.domain=function(n){return arguments.length?(u(n),o()):u()},i.ticks=function(n){var i,o=u(),a=o[0],f=o[o.length-1];(i=f<a)&&(d=a,a=f,f=d);var s,l,v,d=t(a),h=t(f),m=null==n?10:+n,y=[];if(!(e%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),a>0){for(;d<=h;++d)for(l=1,s=r(d);l<e;++l)if(!((v=s*l)<a)){if(v>f)break;y.push(v)}}else for(;d<=h;++d)for(l=e-1,s=r(d);l>=1;--l)if(!((v=s*l)<a)){if(v>f)break;y.push(v)}2*y.length<m&&(y=c(a,f,m))}else y=c(d,h,Math.min(h-d,m)).map(r);return i?y.reverse():y},i.tickFormat=function(n,u){if(null==u&&(u=10===e?".0e":","),"function"!=typeof u&&(u=s(u)),n===1/0)return u;null==n&&(n=10);var o=Math.max(1,e*n/i.ticks().length);return function(n){var i=n/r(Math.round(t(n)));return i*e<e-.5&&(i*=e),i<=o?u(n):""}},i.nice=function(){return u(J(u(),{floor:function(n){return r(Math.floor(t(n)))},ceil:function(n){return r(Math.ceil(t(n)))}}))},i}function on(){var n=en(l()).domain([1,10]);return n.copy=function(){return f(n,on()).base(n.base())},o.apply(n,arguments),n}function an(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function fn(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function cn(n){var t=1,r=n(an(t),fn(t));return r.constant=function(r){return arguments.length?n(an(t=+r),fn(t)):t},v(r)}function sn(){var n=cn(l());return n.copy=function(){return f(n,sn()).constant(n.constant())},o.apply(n,arguments)}var ln=d((function(){}),(function(n,t){n.setTime(+n+t)}),(function(n,t){return t-n}));ln.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?d((function(t){t.setTime(Math.floor(t/n)*n)}),(function(t,r){t.setTime(+t+r*n)}),(function(t,r){return(r-t)/n})):ln:null};var vn=d((function(n){n.setTime(n-n.getMilliseconds())}),(function(n,t){n.setTime(+n+t*h)}),(function(n,t){return(t-n)/h}),(function(n){return n.getUTCSeconds()})),dn=d((function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*h)}),(function(n,t){n.setTime(+n+t*m)}),(function(n,t){return(t-n)/m}),(function(n){return n.getMinutes()})),hn=d((function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*h-n.getMinutes()*m)}),(function(n,t){n.setTime(+n+t*y)}),(function(n,t){return(t-n)/y}),(function(n){return n.getHours()})),mn=d((function(n){n.setDate(1),n.setHours(0,0,0,0)}),(function(n,t){n.setMonth(n.getMonth()+t)}),(function(n,t){return t.getMonth()-n.getMonth()+12*(t.getFullYear()-n.getFullYear())}),(function(n){return n.getMonth()})),yn=d((function(n){n.setUTCSeconds(0,0)}),(function(n,t){n.setTime(+n+t*m)}),(function(n,t){return(t-n)/m}),(function(n){return n.getUTCMinutes()})),Mn=d((function(n){n.setUTCMinutes(0,0,0)}),(function(n,t){n.setTime(+n+t*y)}),(function(n,t){return(t-n)/y}),(function(n){return n.getUTCHours()})),xn=d((function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCMonth(n.getUTCMonth()+t)}),(function(n,t){return t.getUTCMonth()-n.getUTCMonth()+12*(t.getUTCFullYear()-n.getUTCFullYear())}),(function(n){return n.getUTCMonth()}));function pn(n,t,r,i,u,e){const o=[[vn,1,h],[vn,5,5*h],[vn,15,15*h],[vn,30,30*h],[e,1,m],[e,5,5*m],[e,15,15*m],[e,30,30*m],[u,1,y],[u,3,3*y],[u,6,6*y],[u,12,12*y],[i,1,w],[i,2,2*w],[r,1,k],[t,1,D],[t,3,3*D],[n,1,p]];function a(t,r,i){const u=Math.abs(r-t)/i,e=M((([,,n])=>n)).right(o,u);if(e===o.length)return n.every(x(t/p,r/p,i));if(0===e)return ln.every(Math.max(x(t,r,i),1));const[a,f]=o[u/o[e-1][2]<o[e][2]/u?e-1:e];return a.every(f)}return[function(n,t,r){const i=t<n;i&&([n,t]=[t,n]);const u=r&&"function"==typeof r.range?r:a(n,t,r),e=u?u.range(n,+t+1):[];return i?e.reverse():e},a]}const[bn,gn]=pn(b,xn,A,j,Mn,yn),[wn,kn]=pn(g,mn,N,P,hn,dn);function Dn(n){return new Date(n)}function jn(n){return n instanceof Date?+n:+new Date(+n)}function An(n,t,r,i,u,e,o,a,c,s){var l=S(),v=l.invert,d=l.domain,h=s(".%L"),m=s(":%S"),y=s("%I:%M"),M=s("%I %p"),x=s("%a %d"),p=s("%b %d"),b=s("%B"),g=s("%Y");function w(n){return(c(n)<n?h:a(n)<n?m:o(n)<n?y:e(n)<n?M:i(n)<n?u(n)<n?x:p:r(n)<n?b:g)(n)}return l.invert=function(n){return new Date(v(n))},l.domain=function(n){return arguments.length?d(Array.from(n,jn)):d().map(Dn)},l.ticks=function(t){var r=d();return n(r[0],r[r.length-1],null==t?10:t)},l.tickFormat=function(n,t){return null==t?w:s(t)},l.nice=function(n){var r=d();return n&&"function"==typeof n.range||(n=t(r[0],r[r.length-1],null==n?10:n)),n?d(J(r,n)):l},l.copy=function(){return f(l,An(n,t,r,i,u,e,o,a,c,s))},l}function Pn(n,t){if((r=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var r,i=n.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+n.slice(r+1)]}var Nn,Sn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fn(n){if(!(t=Sn.exec(n)))throw new Error("invalid format: "+n);var t;return new Tn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Tn(n){this.fill=void 0===n.fill?" ":n.fill+"",this.align=void 0===n.align?">":n.align+"",this.sign=void 0===n.sign?"-":n.sign+"",this.symbol=void 0===n.symbol?"":n.symbol+"",this.zero=!!n.zero,this.width=void 0===n.width?void 0:+n.width,this.comma=!!n.comma,this.precision=void 0===n.precision?void 0:+n.precision,this.trim=!!n.trim,this.type=void 0===n.type?"":n.type+""}function zn(n,t){var r=Pn(n,t);if(!r)return n+"";var i=r[0],u=r[1];return u<0?"0."+new Array(-u).join("0")+i:i.length>u+1?i.slice(0,u+1)+"."+i.slice(u+1):i+new Array(u-i.length+2).join("0")}Fn.prototype=Tn.prototype,Tn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const En={"%":function(n,t){return(100*n).toFixed(t)},b:function(n){return Math.round(n).toString(2)},c:function(n){return n+""},d:function(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},g:function(n,t){return n.toPrecision(t)},o:function(n){return Math.round(n).toString(8)},p:function(n,t){return zn(100*n,t)},r:zn,s:function(n,t){var r=Pn(n,t);if(!r)return n+"";var i=r[0],u=r[1],e=u-(Nn=3*Math.max(-8,Math.min(8,Math.floor(u/3))))+1,o=i.length;return e===o?i:e>o?i+new Array(e-o+1).join("0"):e>0?i.slice(0,e)+"."+i.slice(e):"0."+new Array(1-e).join("0")+Pn(n,Math.max(0,t+e-1))[0]},X:function(n){return Math.round(n).toString(16).toUpperCase()},x:function(n){return Math.round(n).toString(16)}};function On(n){return n}var $n,Xn,Yn=Array.prototype.map,Bn=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];$n=function(n){var t,r,i=void 0===n.grouping||void 0===n.thousands?On:(t=Yn.call(n.grouping,Number),r=n.thousands+"",function(n,i){for(var u=n.length,e=[],o=0,a=t[0],f=0;u>0&&a>0&&(f+a+1>i&&(a=Math.max(1,i-f)),e.push(n.substring(u-=a,u+a)),!((f+=a+1)>i));)a=t[o=(o+1)%t.length];return e.reverse().join(r)}),u=void 0===n.currency?"":n.currency[0]+"",e=void 0===n.currency?"":n.currency[1]+"",o=void 0===n.decimal?".":n.decimal+"",a=void 0===n.numerals?On:function(n){return function(t){return t.replace(/[0-9]/g,(function(t){return n[+t]}))}}(Yn.call(n.numerals,String)),f=void 0===n.percent?"%":n.percent+"",c=void 0===n.minus?"-":n.minus+"",s=void 0===n.nan?"NaN":n.nan+"";function l(n){var t=(n=Fn(n)).fill,r=n.align,l=n.sign,v=n.symbol,d=n.zero,h=n.width,m=n.comma,y=n.precision,M=n.trim,x=n.type;"n"===x?(m=!0,x="g"):En[x]||(void 0===y&&(y=12),M=!0,x="g"),(d||"0"===t&&"="===r)&&(d=!0,t="0",r="=");var p="$"===v?u:"#"===v&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",b="$"===v?e:/[%p]/.test(x)?f:"",g=En[x],w=/[defgprs%]/.test(x);function k(n){var u,e,f,v=p,k=b;if("c"===x)k=g(n)+k,n="";else{var D=(n=+n)<0||1/n<0;if(n=isNaN(n)?s:g(Math.abs(n),y),M&&(n=function(n){n:for(var t,r=n.length,i=1,u=-1;i<r;++i)switch(n[i]){case".":u=t=i;break;case"0":0===u&&(u=i),t=i;break;default:if(!+n[i])break n;u>0&&(u=0)}return u>0?n.slice(0,u)+n.slice(t+1):n}(n)),D&&0==+n&&"+"!==l&&(D=!1),v=(D?"("===l?l:c:"-"===l||"("===l?"":l)+v,k=("s"===x?Bn[8+Nn/3]:"")+k+(D&&"("===l?")":""),w)for(u=-1,e=n.length;++u<e;)if(48>(f=n.charCodeAt(u))||f>57){k=(46===f?o+n.slice(u+1):n.slice(u))+k,n=n.slice(0,u);break}}m&&!d&&(n=i(n,1/0));var j=v.length+n.length+k.length,A=j<h?new Array(h-j+1).join(t):"";switch(m&&d&&(n=i(A+n,A.length?h-k.length:1/0),A=""),r){case"<":n=v+n+k+A;break;case"=":n=v+A+n+k;break;case"^":n=A.slice(0,j=A.length>>1)+v+n+k+A.slice(j);break;default:n=A+v+n+k}return a(n)}return y=void 0===y?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),k.toString=function(){return n+""},k}return{format:l,formatPrefix:function(n,t){var r,i=l(((n=Fn(n)).type="f",n)),u=3*Math.max(-8,Math.min(8,Math.floor((r=t,((r=Pn(Math.abs(r)))?r[1]:NaN)/3)))),e=Math.pow(10,-u),o=Bn[8+u/3];return function(n){return i(e*n)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Xn=$n.format;var Vn=function(n,t){return n&&n.length?L(n,e(t)):[]},Cn=i&&i.isDate,In=Cn?u(Cn):function(n){return t(n)&&"[object Date]"==r(n)},Rn=new Date,_n=new Date;function qn(n,t,r,i){function u(t){return n(t=0===arguments.length?new Date:new Date(+t)),t}return u.floor=function(t){return n(t=new Date(+t)),t},u.ceil=function(r){return n(r=new Date(r-1)),t(r,1),n(r),r},u.round=function(n){var t=u(n),r=u.ceil(n);return n-t<r-n?t:r},u.offset=function(n,r){return t(n=new Date(+n),null==r?1:Math.floor(r)),n},u.range=function(r,i,e){var o,a=[];if(r=u.ceil(r),e=null==e?1:Math.floor(e),!(r<i&&e>0))return a;do{a.push(o=new Date(+r)),t(r,e),n(r)}while(o<r&&r<i);return a},u.filter=function(r){return qn((function(t){if(t>=t)for(;n(t),!r(t);)t.setTime(t-1)}),(function(n,i){if(n>=n)if(i<0)for(;++i<=0;)for(;t(n,-1),!r(n););else for(;--i>=0;)for(;t(n,1),!r(n););}))},r&&(u.count=function(t,i){return Rn.setTime(+t),_n.setTime(+i),n(Rn),n(_n),Math.floor(r(Rn,_n))},u.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?u.filter(i?function(t){return i(t)%n==0}:function(t){return u.count(0,t)%n==0}):u:null}),u}var Ln=qn((function(){}),(function(n,t){n.setTime(+n+t)}),(function(n,t){return t-n}));Ln.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?qn((function(t){t.setTime(Math.floor(t/n)*n)}),(function(t,r){t.setTime(+t+r*n)}),(function(t,r){return(r-t)/n})):Ln:null};var Un=qn((function(n){n.setTime(n-n.getMilliseconds())}),(function(n,t){n.setTime(+n+1e3*t)}),(function(n,t){return(t-n)/1e3}),(function(n){return n.getUTCSeconds()})),Gn=qn((function(n){n.setTime(n-n.getMilliseconds()-1e3*n.getSeconds())}),(function(n,t){n.setTime(+n+6e4*t)}),(function(n,t){return(t-n)/6e4}),(function(n){return n.getMinutes()})),Hn=qn((function(n){n.setTime(n-n.getMilliseconds()-1e3*n.getSeconds()-6e4*n.getMinutes())}),(function(n,t){n.setTime(+n+36e5*t)}),(function(n,t){return(t-n)/36e5}),(function(n){return n.getHours()}));function Kn(n){return qn((function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)}),(function(n,t){n.setDate(n.getDate()+7*t)}),(function(n,t){return(t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/6048e5}))}var Zn=Kn(0),Jn=Kn(1),Qn=Kn(2),Wn=Kn(3),nt=Kn(4),tt=Kn(5),rt=Kn(6),it=qn((function(n){n.setDate(1),n.setHours(0,0,0,0)}),(function(n,t){n.setMonth(n.getMonth()+t)}),(function(n,t){return t.getMonth()-n.getMonth()+12*(t.getFullYear()-n.getFullYear())}),(function(n){return n.getMonth()})),ut=qn((function(n){n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,t){n.setFullYear(n.getFullYear()+t)}),(function(n,t){return t.getFullYear()-n.getFullYear()}),(function(n){return n.getFullYear()}));ut.every=function(n){return isFinite(n=Math.floor(n))&&n>0?qn((function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,r){t.setFullYear(t.getFullYear()+r*n)})):null};var et=qn((function(n){n.setUTCSeconds(0,0)}),(function(n,t){n.setTime(+n+6e4*t)}),(function(n,t){return(t-n)/6e4}),(function(n){return n.getUTCMinutes()})),ot=qn((function(n){n.setUTCMinutes(0,0,0)}),(function(n,t){n.setTime(+n+36e5*t)}),(function(n,t){return(t-n)/36e5}),(function(n){return n.getUTCHours()}));function at(n){return qn((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCDate(n.getUTCDate()+7*t)}),(function(n,t){return(t-n)/6048e5}))}var ft=at(0),ct=at(1),st=at(2),lt=at(3),vt=at(4),dt=at(5),ht=at(6),mt=qn((function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCMonth(n.getUTCMonth()+t)}),(function(n,t){return t.getUTCMonth()-n.getUTCMonth()+12*(t.getUTCFullYear()-n.getUTCFullYear())}),(function(n){return n.getUTCMonth()})),yt=qn((function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t)}),(function(n,t){return t.getUTCFullYear()-n.getUTCFullYear()}),(function(n){return n.getUTCFullYear()}));function Mt(){return(Mt=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n}).apply(this,arguments)}yt.every=function(n){return isFinite(n=Math.floor(n))&&n>0?qn((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*n)})):null};var xt=[function(n){return n.setMilliseconds(0)},function(n){return n.setSeconds(0)},function(n){return n.setMinutes(0)},function(n){return n.setHours(0)},function(n){return n.setDate(1)},function(n){return n.setMonth(0)}],pt={millisecond:[],second:xt.slice(0,1),minute:xt.slice(0,2),hour:xt.slice(0,3),day:xt.slice(0,4),month:xt.slice(0,5),year:xt.slice(0,6)},bt=function(n){var t=n.format,r=void 0===t?"native":t,i=n.precision,u=n.useUTC,e=void 0===u||u,o=function(n){return function(t){return pt[n].forEach((function(n){n(t)})),t}}(void 0===i?"millisecond":i);return function(n){if(void 0===n)return n;if("native"===r||n instanceof Date)return o(n);var t=e?E(r):O(r);return o(t(n))}},gt=function(n){var t=n;return t.type="band",t},wt=function(n,t,r,i){var u,e=n.base,o=void 0===e?10:e,a=n.min,f=void 0===a?"auto":a,c=n.max,s=void 0===c?"auto":c;if(t.all.some((function(n){return 0===n})))throw new Error("a log scale domain must not include or cross zero");var l,v,d=!1;if(t.all.filter((function(n){return null!=n})).forEach((function(n){d||(void 0===u?u=Math.sign(n):Math.sign(n)!==u&&(d=!0))})),d)throw new Error("a log scale domain must be strictly-positive or strictly-negative");l="auto"===f?t.min:f,v="auto"===s?t.max:s;var h=on().domain([l,v]).rangeRound("x"===i?[0,r]:[r,0]).base(o).nice();return h.type="log",h},kt=function(n,t,r,i){var u,e,o=n.constant,a=void 0===o?1:o,f=n.min,c=void 0===f?"auto":f,s=n.max,l=void 0===s?"auto":s,v=n.reverse,d=void 0!==v&&v;u="auto"===c?t.min:c,e="auto"===l?t.max:l;var h=sn().constant(a).rangeRound("x"===i?[0,r]:[r,0]).nice();h.domain(!0===d?[e,u]:[u,e]);var m=h;return m.type="symlog",m},Dt=function(n,t){return n===t},jt=function(n,t){return n.getTime()===t.getTime()};function At(n,t,r,i){switch(n.type){case"linear":return function(n,t,r,i){var u,e,o,a,f=n.min,c=void 0===f?0:f,s=n.max,l=void 0===s?"auto":s,v=n.stacked,d=void 0!==v&&v,h=n.reverse,m=void 0!==h&&h,y=n.clamp,M=void 0!==y&&y,x=n.nice,p=void 0!==x&&x;u="auto"===c?!0===d?null!=(e=t.minStacked)?e:0:t.min:c,o="auto"===l?!0===d?null!=(a=t.maxStacked)?a:0:t.max:l;var b=$().rangeRound("x"===i?[0,r]:[r,0]).domain(m?[o,u]:[u,o]).clamp(M);return!0===p?b.nice():"number"==typeof p&&b.nice(p),function(n,t){void 0===t&&(t=!1);var r=n;return r.type="linear",r.stacked=t,r}(b,d)}(n,t,r,i);case"point":return function(n,t,r){var i=function(){return Z(K.apply(null,arguments).paddingInner(1))}().range([0,r]).domain(t.all);return i.type="point",i}(0,t,r);case"band":return function(n,t,r,i){var u=n.round,e=void 0===u||u,o=K().range("x"===i?[0,r]:[r,0]).domain(t.all).round(e);return gt(o)}(n,t,r,i);case"time":return function(n,t,r){var i,u,e=n.format,a=void 0===e?"native":e,f=n.precision,c=n.min,s=void 0===c?"auto":c,l=n.max,v=void 0===l?"auto":l,d=n.useUTC,h=void 0===d||d,m=n.nice,y=void 0!==m&&m,M=bt({format:a,precision:void 0===f?"millisecond":f,useUTC:h});i="auto"===s?M(t.min):"native"!==a?M(s):s,u="auto"===v?M(t.max):"native"!==a?M(v):v;var x=h?function(){return o.apply(An(bn,gn,b,xn,A,j,Mn,yn,vn,T).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}():function(){return o.apply(An(wn,kn,g,mn,N,P,hn,dn,vn,F).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}();x.range([0,r]),i&&u&&x.domain([i,u]),!0===y?x.nice():"object"!=typeof y&&"number"!=typeof y||x.nice(y);var p=x;return p.type="time",p.useUTC=h,p}(n,t,r);case"log":return wt(n,t,r,i);case"symlog":return kt(n,t,r,i);default:throw new Error("invalid scale spec")}}var Pt=function(n,t,r){var i;if("stacked"in r&&r.stacked){var u=n.data["x"===t?"xStacked":"yStacked"];return null==u?null:r(u)}return null!=(i=r(n.data[t]))?i:null},Nt=function(n,t,r,i,u){var e=n.map((function(n){return function(n){return Mt({},n,{data:n.data.map((function(n){return{data:Mt({},n)}}))})}(n)})),o=St(e,t,r);"stacked"in t&&!0===t.stacked&&zt(o,e),"stacked"in r&&!0===r.stacked&&Et(o,e);var a=At(t,o.x,i,"x"),f=At(r,o.y,u,"y"),c=e.map((function(n){return Mt({},n,{data:n.data.map((function(n){return Mt({},n,{position:{x:Pt(n,"x",a),y:Pt(n,"y",f)}})}))})}));return Mt({},o,{series:c,xScale:a,yScale:f})},St=function(n,t,r){return{x:Ft(n,"x",t),y:Ft(n,"y",r)}},Ft=function(n,t,r,i){var u=void 0===i?{}:i,e=u.getValue,o=void 0===e?function(n){return n.data[t]}:e,a=u.setValue,f=void 0===a?function(n,r){n.data[t]=r}:a;if("linear"===r.type)n.forEach((function(n){n.data.forEach((function(n){var t=o(n);t&&f(n,parseFloat(String(t)))}))}));else if("time"===r.type&&"native"!==r.format){var c=bt(r);n.forEach((function(n){n.data.forEach((function(n){var t=o(n);t&&f(n,c(t))}))}))}var s=[];switch(n.forEach((function(n){n.data.forEach((function(n){s.push(o(n))}))})),r.type){case"linear":var l=G(U(s).filter((function(n){return null!==n})),(function(n){return n}));return{all:l,min:Math.min.apply(Math,l),max:Math.max.apply(Math,l)};case"time":var v=Vn(s,(function(n){return n.getTime()})).slice(0).sort((function(n,t){return t.getTime()-n.getTime()})).reverse();return{all:v,min:v[0],max:z(v)};default:var d=U(s);return{all:d,min:d[0],max:z(d)}}},Tt=function(n,t,r){var i=function(n){return"x"===n?"y":"x"}(n),u=[];t[i].all.forEach((function(t){var e=In(t)?jt:Dt,o=[];r.forEach((function(r){var a=r.data.find((function(n){return e(n.data[i],t)})),f=null,c=null;if(void 0!==a){if(null!==(f=a.data[n])){var s=z(o);void 0===s?c=f:null!==s&&(c=s+f)}a.data["x"===n?"xStacked":"yStacked"]=c}o.push(c),null!==c&&u.push(c)}))})),t[n].minStacked=Math.min.apply(Math,u),t[n].maxStacked=Math.max.apply(Math,u)},zt=function(n,t){return Tt("x",n,t)},Et=function(n,t){return Tt("y",n,t)},Ot=function(n){var t=n.bandwidth();if(0===t)return n;var r=t/2;return n.round()&&(r=Math.round(r)),function(t){var i;return(null!=(i=n(t))?i:0)+r}},$t={millisecond:[Ln,Ln],second:[Un,Un],minute:[Gn,et],hour:[Hn,ot],day:[qn((function(n){return n.setHours(0,0,0,0)}),(function(n,t){return n.setDate(n.getDate()+t)}),(function(n,t){return(t.getTime()-n.getTime())/864e5}),(function(n){return Math.floor(n.getTime()/864e5)})),qn((function(n){return n.setUTCHours(0,0,0,0)}),(function(n,t){return n.setUTCDate(n.getUTCDate()+t)}),(function(n,t){return(t.getTime()-n.getTime())/864e5}),(function(n){return Math.floor(n.getTime()/864e5)}))],week:[Zn,ft],sunday:[Zn,ft],monday:[Jn,ct],tuesday:[Qn,st],wednesday:[Wn,lt],thursday:[nt,vt],friday:[tt,dt],saturday:[rt,ht],month:[it,mt],year:[ut,yt]},Xt=Object.keys($t),Yt=new RegExp("^every\\s*(\\d+)?\\s*("+Xt.join("|")+")s?$","i"),Bt=function(n,t){if(Array.isArray(t))return t;if("string"==typeof t&&"useUTC"in n){var r=t.match(Yt);if(r){var i=r[1],u=r[2],e=$t[u][n.useUTC?1:0];if("day"===u){var o,a,f=n.domain(),c=f[0],s=new Date(f[1]);return s.setDate(s.getDate()+1),null!=(o=null==(a=e.every(Number(null!=i?i:1)))?void 0:a.range(c,s))?o:[]}if(void 0===i)return n.ticks(e);var l=e.every(Number(i));if(l)return n.ticks(l)}throw new Error("Invalid tickValues: "+t)}if("ticks"in n){if(void 0===t)return n.ticks();if("number"==typeof(v=t)&&isFinite(v)&&Math.floor(v)===v)return n.ticks(t)}var v;return n.domain()};function Vt(){return(Vt=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n}).apply(this,arguments)}var Ct=function(n){var t,r=n.axis,i=n.scale,u=n.ticksPosition,e=n.tickSize,o=n.tickPadding,a=n.tickRotation,f=n.engine,c=void 0===f?"svg":f,s=Bt(i,n.tickValues),l=_[c],v="bandwidth"in i?Ot(i):i,d={lineX:0,lineY:0},h={textX:0,textY:0},m="object"==typeof document&&"rtl"===document.dir,y=l.align.center,M=l.baseline.center;return"x"===r?(t=function(n){var t;return{x:null!=(t=v(n))?t:0,y:0}},d.lineY=e*("after"===u?1:-1),h.textY=(e+o)*("after"===u?1:-1),M="after"===u?l.baseline.top:l.baseline.bottom,0===a?y=l.align.center:"after"===u&&a<0||"before"===u&&a>0?(y=l.align[m?"left":"right"],M=l.baseline.center):("after"===u&&a>0||"before"===u&&a<0)&&(y=l.align[m?"right":"left"],M=l.baseline.center)):(t=function(n){var t;return{x:0,y:null!=(t=v(n))?t:0}},d.lineX=e*("after"===u?1:-1),h.textX=(e+o)*("after"===u?1:-1),y="after"===u?l.align.left:l.align.right),{ticks:s.map((function(n){return Vt({key:"number"==typeof n||"string"==typeof n?n:""+n,value:n},t(n),d,h)})),textAlign:y,textBaseline:M}},It=function(n,t){if(void 0===n||"function"==typeof n)return n;if("time"===t.type){var r=F(n);return function(n){return r(n instanceof Date?n:new Date(n))}}return Xn(n)},Rt=function(n){var t=n.width,r=n.height,i=n.scale,u=n.axis,e=n.values,o=(Array.isArray(e)?e:void 0)||Bt(i,e),a="bandwidth"in i?Ot(i):i;return o.map("x"===u?function(n){var t,i;return{key:""+n,x1:null!=(t=a(n))?t:0,x2:null!=(i=a(n))?i:0,y1:0,y2:r}}:function(n){var r,i;return{key:""+n,x1:0,x2:t,y1:null!=(r=a(n))?r:0,y2:null!=(i=a(n))?i:0}})},_t=n.memo((function(t){var r,i=t.value,u=t.format,e=t.lineX,o=t.lineY,a=t.onClick,f=t.textBaseline,c=t.textAnchor,s=t.animatedProps,l=X(),v=null!=(r=null==u?void 0:u(i))?r:i,d=n.useMemo((function(){var n={opacity:s.opacity};return a?{style:Vt({},n,{cursor:"pointer"}),onClick:function(n){return a(n,v)}}:{style:n}}),[s.opacity,a,v]);return Y.jsxs(B.g,Vt({transform:s.transform},d,{children:[Y.jsx("line",{x1:0,x2:e,y1:0,y2:o,style:l.axis.ticks.line}),Y.jsx(B.text,{dominantBaseline:f,textAnchor:c,transform:s.textTransform,style:l.axis.ticks.text,children:v})]}))})),qt=n.memo((function(t){var r=t.axis,i=t.scale,u=t.x,e=void 0===u?0:u,o=t.y,a=void 0===o?0:o,f=t.length,c=t.ticksPosition,s=t.tickValues,l=t.tickSize,v=void 0===l?5:l,d=t.tickPadding,h=void 0===d?5:d,m=t.tickRotation,y=void 0===m?0:m,M=t.format,x=t.renderTick,p=void 0===x?_t:x,b=t.legend,g=t.legendPosition,w=void 0===g?"end":g,k=t.legendOffset,D=void 0===k?0:k,j=t.onClick,A=t.ariaHidden,P=X(),N=n.useMemo((function(){return It(M,i)}),[M,i]),S=Ct({axis:r,scale:i,ticksPosition:c,tickValues:s,tickSize:v,tickPadding:h,tickRotation:y}),F=S.ticks,T=S.textAlign,z=S.textBaseline,E=null;if(void 0!==b){var O,$=0,R=0,_=0;"y"===r?(_=-90,$=D,"start"===w?(O="start",R=f):"middle"===w?(O="middle",R=f/2):"end"===w&&(O="end")):(R=D,"start"===w?O="start":"middle"===w?(O="middle",$=f/2):"end"===w&&(O="end",$=f)),E=Y.jsx("text",{transform:"translate("+$+", "+R+") rotate("+_+")",textAnchor:O,style:Vt({dominantBaseline:"central"},P.axis.legend.text),children:b})}var q=V(),L=q.animate,U=q.config,G=C({transform:"translate("+e+","+a+")",lineX2:"x"===r?f:0,lineY2:"x"===r?0:f,config:U,immediate:!L}),H=I(F,{keys:function(n){return n.key},initial:function(n){return{opacity:1,transform:"translate("+n.x+","+n.y+")",textTransform:"translate("+n.textX+","+n.textY+") rotate("+y+")"}},from:function(n){return{opacity:0,transform:"translate("+n.x+","+n.y+")",textTransform:"translate("+n.textX+","+n.textY+") rotate("+y+")"}},enter:function(n){return{opacity:1,transform:"translate("+n.x+","+n.y+")",textTransform:"translate("+n.textX+","+n.textY+") rotate("+y+")"}},update:function(n){return{opacity:1,transform:"translate("+n.x+","+n.y+")",textTransform:"translate("+n.textX+","+n.textY+") rotate("+y+")"}},leave:{opacity:0},config:U,immediate:!L});return Y.jsxs(B.g,{transform:G.transform,"aria-hidden":A,children:[H((function(t,r,i,u){return n.createElement(p,Vt({tickIndex:u,format:N,rotate:y,textBaseline:z,textAnchor:T,animatedProps:t},r,j?{onClick:j}:{}))})),Y.jsx(B.line,{style:P.axis.domain.line,x1:0,x2:G.lineX2,y1:0,y2:G.lineY2}),E]})})),Lt={ticksPosition:R.oneOf(["before","after"]),tickValues:R.oneOfType([R.number,R.arrayOf(R.oneOfType([R.number,R.string,R.instanceOf(Date)])),R.string]),tickSize:R.number,tickPadding:R.number,tickRotation:R.number,format:R.oneOfType([R.func,R.string]),renderTick:R.func,legend:R.node,legendPosition:R.oneOf(["start","middle","end"]),legendOffset:R.number,ariaHidden:R.bool},Ut=R.shape(Lt),Gt=["top","right","bottom","left"],Ht=n.memo((function(n){var t=n.xScale,r=n.yScale,i=n.width,u=n.height,e={top:n.top,right:n.right,bottom:n.bottom,left:n.left};return Y.jsx(Y.Fragment,{children:Gt.map((function(n){var o=e[n];if(!o)return null;var a="top"===n||"bottom"===n;return Y.jsx(qt,Vt({},o,{axis:a?"x":"y",x:"right"===n?i:0,y:"bottom"===n?u:0,scale:a?t:r,length:a?i:u,ticksPosition:"top"===n||"left"===n?"before":"after"}),n)}))})})),Kt=n.memo((function(n){var t=n.animatedProps,r=X();return Y.jsx(B.line,Vt({},t,r.grid.line))})),Zt=n.memo((function(t){var r=t.lines,i=V(),u=I(r,{keys:function(n){return n.key},initial:function(n){return{opacity:1,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}},from:function(n){return{opacity:0,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}},enter:function(n){return{opacity:1,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}},update:function(n){return{opacity:1,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}},leave:{opacity:0},config:i.config,immediate:!i.animate});return Y.jsx("g",{children:u((function(t,r){return n.createElement(Kt,Vt({},r,{key:r.key,animatedProps:t}))}))})})),Jt=n.memo((function(t){var r=t.width,i=t.height,u=t.xScale,e=t.yScale,o=t.xValues,a=t.yValues,f=n.useMemo((function(){return!!u&&Rt({width:r,height:i,scale:u,axis:"x",values:o})}),[u,o,r,i]),c=n.useMemo((function(){return!!e&&Rt({width:r,height:i,scale:e,axis:"y",values:a})}),[i,r,e,a]);return Y.jsxs(Y.Fragment,{children:[f&&Y.jsx(Zt,{lines:f}),c&&Y.jsx(Zt,{lines:c})]})})),Qt=function(n,t){var r=t.xScale,i=t.yScale,u=t.width,e=t.height,o=t.theme,a={top:t.top,right:t.right,bottom:t.bottom,left:t.left};Gt.forEach((function(t){var f=a[t];if(!f)return null;var c="top"===t||"bottom"===t,s="top"===t||"left"===t?"before":"after",l=c?r:i,v=It(f.format,l);!function(n,t){var r,i=t.axis,u=t.x,e=void 0===u?0:u,o=t.y,a=void 0===o?0:o,f=t.length,c=t.tickSize,s=t.tickPadding,l=t.tickRotation,v=void 0===l?0:l,d=t.format,h=t.legend,m=t.legendPosition,y=void 0===m?"end":m,M=t.legendOffset,x=void 0===M?0:M,p=t.theme,b=Ct({axis:i,scale:t.scale,ticksPosition:t.ticksPosition,tickValues:t.tickValues,tickSize:void 0===c?5:c,tickPadding:void 0===s?5:s,tickRotation:v,engine:"canvas"}),g=b.ticks,w=b.textAlign,k=b.textBaseline;n.save(),n.translate(e,a),n.textAlign=w,n.textBaseline=k,n.font=(p.axis.ticks.text.fontWeight?p.axis.ticks.text.fontWeight+" ":"")+p.axis.ticks.text.fontSize+"px "+p.axis.ticks.text.fontFamily,(null!=(r=p.axis.domain.line.strokeWidth)?r:0)>0&&(n.lineWidth=Number(p.axis.domain.line.strokeWidth),n.lineCap="square",p.axis.domain.line.stroke&&(n.strokeStyle=p.axis.domain.line.stroke),n.beginPath(),n.moveTo(0,0),n.lineTo("x"===i?f:0,"x"===i?0:f),n.stroke());var D="function"==typeof d?d:function(n){return""+n};if(g.forEach((function(t){var r;(null!=(r=p.axis.ticks.line.strokeWidth)?r:0)>0&&(n.lineWidth=Number(p.axis.ticks.line.strokeWidth),n.lineCap="square",p.axis.ticks.line.stroke&&(n.strokeStyle=p.axis.ticks.line.stroke),n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(t.x+t.lineX,t.y+t.lineY),n.stroke());var i=D(t.value);n.save(),n.translate(t.x+t.textX,t.y+t.textY),n.rotate(q(v)),p.axis.ticks.text.fill&&(n.fillStyle=p.axis.ticks.text.fill),n.fillText(String(i),0,0),n.restore()})),void 0!==h){var j=0,A=0,P=0,N="center";"y"===i?(P=-90,j=x,"start"===y?(N="start",A=f):"middle"===y?(N="center",A=f/2):"end"===y&&(N="end")):(A=x,"start"===y?N="start":"middle"===y?(N="center",j=f/2):"end"===y&&(N="end",j=f)),n.translate(j,A),n.rotate(q(P)),n.font=(p.axis.legend.text.fontWeight?p.axis.legend.text.fontWeight+" ":"")+p.axis.legend.text.fontSize+"px "+p.axis.legend.text.fontFamily,p.axis.legend.text.fill&&(n.fillStyle=p.axis.legend.text.fill),n.textAlign=N,n.textBaseline="middle",n.fillText(h,0,0)}n.restore()}(n,Vt({},f,{axis:c?"x":"y",x:"right"===t?u:0,y:"bottom"===t?e:0,scale:l,format:v,length:c?u:e,ticksPosition:s,theme:o}))}))},Wt=function(n,t){Rt({width:t.width,height:t.height,scale:t.scale,axis:t.axis,values:t.values}).forEach((function(t){n.beginPath(),n.moveTo(t.x1,t.y1),n.lineTo(t.x2,t.y2),n.stroke()}))};export{Ut as A,Jt as B,Wt as C,Qt as V,Ht as X,K as b,At as c,Nt as d,gt as n,Vn as u}