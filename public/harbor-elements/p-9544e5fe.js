import{d as t,f as e}from"./p-9227bedb.js";import{f as n,e as r}from"./p-53cd60da.js";import{_ as s,b as o}from"./p-b6499249.js";import{i}from"./p-ffcea7d9.js";import{_ as a}from"./p-b2fae519.js";import{_ as u}from"./p-fd366e3b.js";import{_ as c}from"./p-13335944.js";import{t as f}from"./p-666c6330.js";var l=function(t,e,n,r){var s=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++s]);++s<o;)n=e(n,t[s],s,t);return n},d=function(t,e,n,r,s){return s(t,(function(t,s,o){n=r?(r=!1,t):e(n,t,s,o)})),n},m=function(t,e,r){var i=n(t)?l:d,a=arguments.length<3;return i(t,s(e),r,a,o)},p=function(t,e){return(n(t)?c:o)(t,"function"==typeof(s=e)?s:r);var s},g=function(t){return t?1/0===(t=f(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},v=function(t){var e=g(t),n=e%1;return e==e?n?e-n:e:0},h=Math.max,b=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:v(n);return o<0&&(o=h(r+o,0)),u(t,s(e),o)};const x=t=>!("isConnected"in t)||t.isConnected,y=(()=>{let t;return(...e)=>{t&&clearTimeout(t),t=setTimeout((()=>{t=0,(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(x))})(...e)}),2e3)}})(),j=(n,r)=>{const s=((t,e=((t,e)=>t!==e))=>{let n=new Map(Object.entries(null!=t?t:{}));const r={dispose:[],get:[],set:[],reset:[]},s=()=>{n=new Map(Object.entries(null!=t?t:{})),r.reset.forEach((t=>t()))},o=t=>(r.get.forEach((e=>e(t))),n.get(t)),i=(t,s)=>{const o=n.get(t);e(s,o,t)&&(n.set(t,s),r.set.forEach((e=>e(t,s,o))))},a="undefined"==typeof Proxy?{}:new Proxy(t,{get:(t,e)=>o(e),ownKeys:()=>Array.from(n.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,e)=>n.has(e),set:(t,e,n)=>(i(e,n),!0)}),u=(t,e)=>(r[t].push(e),()=>{((t,e)=>{const n=t.indexOf(e);n>=0&&(t[n]=t[t.length-1],t.length--)})(r[t],e)});return{state:a,get:o,set:i,on:u,onChange:(e,n)=>{const r=u("set",((t,r)=>{t===e&&n(r)})),s=u("reset",(()=>n(t[e])));return()=>{r(),s()}},use:(...t)=>t.forEach((t=>{t.set&&u("set",t.set),t.get&&u("get",t.get),t.reset&&u("reset",t.reset)})),dispose:()=>{r.dispose.forEach((t=>t())),s()},reset:s,forceUpdate:t=>{const e=n.get(t);r.set.forEach((n=>n(t,e,e)))}}})(n,r);return(({on:n})=>{const r=new Map;"function"==typeof t&&(n("dispose",(()=>{r.clear()})),n("get",(e=>{const n=t();n&&((t,e,n)=>{const r=t.get(e);r?r.includes(n)||r.push(n):t.set(e,[n])})(r,e,n)})),n("set",(t=>{const n=r.get(t);n&&r.set(t,n.filter(e)),y(r)})),n("reset",(()=>{r.forEach((t=>t.forEach(e))),y(r)})))})(s),s};var I=Math.ceil,w=Math.max,M=function(t,e,n){return n&&"number"!=typeof n&&a(t,e,n)&&(e=n=void 0),t=g(t),void 0===e?(e=t,t=0):e=g(e),function(t,e,n,r){for(var s=-1,o=w(I((e-t)/(n||1)),0),i=Array(o);o--;)i[r?o:++s]=t,t+=n;return i}(t,e,n=void 0===n?t<e?1:-1:g(n),void 0)};function O(t,e){for(let n in e)t.set(n,e[n])}class T{constructor(t){const e=this.dataStore=j({items:[],proxyItems:[],source:[],groupingDepth:0,groups:{},type:t,trimmed:{}});e.use((t=>({set(e,n){if(!function(t){return"proxyItems"===t}(e))return;const r=t.get("items").reduce(((t,e)=>(t[e]=!0,t)),{}),s=n.reduce(((t,e)=>(r[e]&&t.push(e),t)),[]);t.set("items",s)}}))(e)),e.use((t=>({set(e,n){switch(e){case"trimmed":const e=t.get("proxyItems"),r=function(t){const e={};for(let n in t)for(let r in t[n])e[r]=e[r]||t[n][r];return e}(n),s=e.reduce(((t,e)=>(r[e]||t.push(e),t)),[]);t.set("items",s)}}}))(e))}get store(){return this.dataStore}updateData(t,e,n=!1){n||this.store.set("trimmed",{}),this.store.set("items",[]);const r=M(0,(null==t?void 0:t.length)||0);O(this.store,{source:t,proxyItems:[...r]}),this.store.set("items",r),e&&O(this.store,{groupingDepth:e.depth,groups:e.groups})}addTrimmed(t){let e=this.store.get("trimmed");e=Object.assign(Object.assign({},e),t),O(this.store,{trimmed:e})}setData(t){const e=Object.assign({},t);O(this.store,e)}refresh(){const t=this.store.get("source");this.store.set("source",[...t])}}function D(t,e){return t.get("items")[e]}function C(t){const e=t.get("source");return t.get("items").map((t=>e[t]))}function _(t,e){const n=t.get("items");return t.get("source")[n[e]]}function z(t,e){const n=t.get("items"),r=t.get("source");for(let t in e)r[n[t]]=e[t];t.set("source",[...r])}function P(t,e){t.set("items",e)}function A(t,e){const n=t.get("items"),r=t.get("source"),s=b(r,{prop:e});return n.indexOf(s)}var R=Math.floor,S=Math.min,H=function(t,e,n){var s=0,o=null==t?s:t.length;if("number"==typeof e&&e==e&&o<=2147483647){for(;s<o;){var a=s+o>>>1,u=t[a];null!==u&&!i(u)&&(n?u<=e:u<e)?s=a+1:o=a}return o}return function(t,e,n,r){var s=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!=e,u=null===e,c=i(e),f=void 0===e;s<o;){var l=R((s+o)/2),d=n(t[l]),m=void 0!==d,p=null===d,g=d==d,v=i(d);if(a)var h=r||g;else h=f?g&&(r||m):u?g&&m&&(r||!p):c?g&&m&&!p&&(r||!v):!p&&!v&&(r?d<=e:d<e);h?s=l+1:o=l}return S(o,4294967294)}(t,e,r,n)},U=function(t,e){return H(t,e)};function k(t,e){return t<e}function q(t){const e=t.createElement("div"),n=e.style;n.visibility="hidden",n.overflow="scroll",n.msOverflowStyle="scrollbar",t.body.appendChild(e);const r=t.createElement("div");e.appendChild(r);const s=e.offsetWidth-r.offsetWidth;return e.parentNode.removeChild(e),s}function B(t,e,n){return(n[1]-n[0])*(t-e[0])/(e[1]-e[0])+n[0]}async function E(t=0){await new Promise((e=>{setTimeout((()=>e()),t)}))}function F(t,e){let n=[];const r={},s={};let o=0;const i=Object.assign(Object.assign({},t.sizes),e);let a=[];p(e,((e,n)=>{t.sizes[n]?o+=e-t.sizes[n]:(o+=e-(t.realSize?t.originItemSize:0),a.splice(U(a,parseInt(n,10)),0,parseInt(n,10)))}));const u=function(t,e,n=k){const r=[];let s=0,o=0,i=0;for(;i<t.length+e.length;){let a=o>=e.length;s>=t.length||!a&&!n(t[s],e[o])?(r[i]=e[o],o++):(r[i]=t[s],s++),i++}return r}(t.indexes,a);return m(u,((e,o,a)=>{const u={itemIndex:o,start:0,end:0};return u.start=e?(o-e.itemIndex-1)*t.originItemSize+e.end:o*t.originItemSize,u.end=u.start+i[o],n.push(u.start),s[o]=r[a]=u,u}),void 0),{indexes:u,positionIndexes:[...n],positionIndexToItem:Object.assign({},r),indexToItem:s,realSize:t.realSize+o,sizes:i}}function G({indexes:t,positionIndexes:e,originItemSize:n,positionIndexToItem:r},s){const o={itemIndex:0,start:0,end:0},i=t.length?U(e,s):0;if(!i)return o.itemIndex=Math.floor(s/n),o.start=o.itemIndex*n,o.end=o.start+n,o;const a=r[i-1];if(a.end>s)return a;const u=Math.floor((s-a.end)/n);return o.itemIndex=a.itemIndex+1+u,o.start=a.end+u*n,o.end=o.start+n,o}function K(t,e){let n={itemIndex:e,start:0,end:0};if(t.indexToItem[e])return t.indexToItem[e];const r=t.indexes.length?U(t.indexes,e):0;if(!r)return n.start=n.itemIndex*t.originItemSize,n.end=n.start+t.originItemSize,n;const s=t.indexToItem[t.indexes[r-1]];return n.start=s.end+(e-s.itemIndex-1)*t.originItemSize,n.end=n.start+t.originItemSize,n}const J=30,L="data-rgCol",N="data-rgRow",Q="grid-uuid",V="disabled",W="rgCell",X="rgHeaderCell",Y="sortable",Z="header-rgRow",$="actual-rgRow",tt="revo-drag-icon",et="revo-draggable",nt="focused-cell",rt="selection-border-range",st="temp-bg-range",ot="autofill-handle",it="edit-input-wrapper",at="Draggable item",ut="__rvgr";export{$ as A,at as B,W as C,T as D,it as E,nt as F,ut as G,X as H,J as M,rt as S,st as T,Q as U,A as a,C as b,j as c,O as d,p as e,b as f,_ as g,F as h,K as i,G as j,E as k,D as l,P as m,q as n,V as o,ot as p,B as q,m as r,z as s,v as t,tt as u,et as v,L as w,N as x,Y as y,Z as z}