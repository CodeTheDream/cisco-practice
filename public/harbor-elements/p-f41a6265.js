import{r as t}from"./p-f986f79b.js";import{Q as n,j as e,p as i,R as r,i as o,M as s,T as l,l as u,m as h,F as a,t as c,w as f,V as d,C as y,n as p,o as v,a as g,k as b,E as w,q as x,A as m,s as M,H as S,J as k,c as C,d as A,W as _,e as B,v as P,B as W,f as $,r as F,P as L,S as G}from"./p-f24d3984.js";import{A as O,C as E,V as I,d as T,B as D,X as U}from"./p-3eca9b19.js";import{p as V}from"./p-cabea9b4.js";function j(t){return function(){return t}}function H(t){this._context=t}function Y(t){return new H(t)}function z(t){return t[0]}function R(t){return t[1]}function X(){var t=z,n=R,e=j(!0),i=null,r=Y,o=null;function s(s){var l,u,h,a=s.length,c=!1;for(null==i&&(o=r(h=V())),l=0;l<=a;++l)!(l<a&&e(u=s[l],l,s))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(u,l,s),+n(u,l,s));if(h)return o=null,h+""||null}return s.x=function(n){return arguments.length?(t="function"==typeof n?n:j(+n),s):t},s.y=function(t){return arguments.length?(n="function"==typeof t?t:j(+t),s):n},s.defined=function(t){return arguments.length?(e="function"==typeof t?t:j(!!t),s):e},s.curve=function(t){return arguments.length?(r=t,null!=i&&(o=r(i)),s):r},s.context=function(t){return arguments.length?(null==t?i=o=null:o=r(i=t),s):i},s}H.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};const N=Math.pow(2,-52),Z=new Uint32Array(512);class q{static from(t,n=rt,e=ot){const i=t.length,r=new Float64Array(2*i);for(let o=0;o<i;o++){const i=t[o];r[2*o]=n(i),r[2*o+1]=e(i)}return new q(r)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const e=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*e),this._halfedges=new Int32Array(3*e),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:e,_hullTri:i,_hullHash:r}=this,o=t.length>>1;let s=1/0,l=1/0,u=-1/0,h=-1/0;for(let n=0;n<o;n++){const e=t[2*n],i=t[2*n+1];e<s&&(s=e),i<l&&(l=i),e>u&&(u=e),i>h&&(h=i),this._ids[n]=n}const a=(s+u)/2,c=(l+h)/2;let f,d,y,p=1/0;for(let n=0;n<o;n++){const e=J(a,c,t[2*n],t[2*n+1]);e<p&&(f=n,p=e)}const v=t[2*f],g=t[2*f+1];p=1/0;for(let n=0;n<o;n++){if(n===f)continue;const e=J(v,g,t[2*n],t[2*n+1]);e<p&&e>0&&(d=n,p=e)}let b=t[2*d],w=t[2*d+1],x=1/0;for(let n=0;n<o;n++){if(n===f||n===d)continue;const e=nt(v,g,b,w,t[2*n],t[2*n+1]);e<x&&(y=n,x=e)}let m=t[2*y],M=t[2*y+1];if(x===1/0){for(let n=0;n<o;n++)this._dists[n]=t[2*n]-t[0]||t[2*n+1]-t[1];et(this._ids,this._dists,0,o-1);const n=new Uint32Array(o);let e=0;for(let t=0,i=-1/0;t<o;t++){const r=this._ids[t];this._dists[r]>i&&(n[e++]=r,i=this._dists[r])}return this.hull=n.subarray(0,e),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Q(v,g,b,w,m,M)){const t=d,n=b,e=w;d=y,b=m,w=M,y=t,m=n,M=e}const S=function(t,n,e,i,r,o){const s=e-t,l=i-n,u=r-t,h=o-n,a=s*s+l*l,c=u*u+h*h,f=.5/(s*h-l*u);return{x:t+(h*a-l*c)*f,y:n+(s*c-u*a)*f}}(v,g,b,w,m,M);this._cx=S.x,this._cy=S.y;for(let n=0;n<o;n++)this._dists[n]=J(t[2*n],t[2*n+1],S.x,S.y);et(this._ids,this._dists,0,o-1),this._hullStart=f;let k=3;e[f]=n[y]=d,e[d]=n[f]=y,e[y]=n[d]=f,i[f]=0,i[d]=1,i[y]=2,r.fill(-1),r[this._hashKey(v,g)]=f,r[this._hashKey(b,w)]=d,r[this._hashKey(m,M)]=y,this.trianglesLen=0,this._addTriangle(f,d,y,-1,-1,-1);for(let o,s,l=0;l<this._ids.length;l++){const u=this._ids[l],h=t[2*u],a=t[2*u+1];if(l>0&&Math.abs(h-o)<=N&&Math.abs(a-s)<=N)continue;if(o=h,s=a,u===f||u===d||u===y)continue;let c=0;for(let t=0,n=this._hashKey(h,a);t<this._hashSize&&(c=r[(n+t)%this._hashSize],-1===c||c===e[c]);t++);c=n[c];let p,v=c;for(;p=e[v],!Q(h,a,t[2*v],t[2*v+1],t[2*p],t[2*p+1]);)if(v=p,v===c){v=-1;break}if(-1===v)continue;let g=this._addTriangle(v,u,e[v],-1,-1,i[v]);i[u]=this._legalize(g+2),i[v]=g,k++;let b=e[v];for(;p=e[b],Q(h,a,t[2*b],t[2*b+1],t[2*p],t[2*p+1]);)g=this._addTriangle(b,u,p,i[u],-1,i[b]),i[u]=this._legalize(g+2),e[b]=b,k--,b=p;if(v===c)for(;p=n[v],Q(h,a,t[2*p],t[2*p+1],t[2*v],t[2*v+1]);)g=this._addTriangle(p,u,v,-1,i[v],i[p]),this._legalize(g+2),i[p]=g,e[v]=v,k--,v=p;this._hullStart=n[u]=v,e[v]=n[b]=u,e[u]=b,r[this._hashKey(h,a)]=u,r[this._hashKey(t[2*v],t[2*v+1])]=v}this.hull=new Uint32Array(k);for(let t=0,n=this._hullStart;t<k;t++)this.hull[t]=n,n=e[n];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:e,coords:i}=this;let r=0,o=0;for(;;){const s=e[t],l=t-t%3;if(o=l+(t+2)%3,-1===s){if(0===r)break;t=Z[--r];continue}const u=s-s%3,h=u+(s+2)%3,a=n[o],c=n[t],f=n[l+(t+1)%3],d=n[h];if(tt(i[2*a],i[2*a+1],i[2*c],i[2*c+1],i[2*f],i[2*f+1],i[2*d],i[2*d+1])){n[t]=d,n[s]=a;const i=e[h];if(-1===i){let n=this._hullStart;do{if(this._hullTri[n]===h){this._hullTri[n]=t;break}n=this._hullPrev[n]}while(n!==this._hullStart)}this._link(t,i),this._link(s,e[o]),this._link(o,h);const l=u+(s+1)%3;r<Z.length&&(Z[r++]=l)}else{if(0===r)break;t=Z[--r]}}return o}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,e,i,r,o){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=e,this._link(s,i),this._link(s+1,r),this._link(s+2,o),this.trianglesLen+=3,s}}function J(t,n,e,i){const r=t-e,o=n-i;return r*r+o*o}function K(t,n,e,i,r,o){const s=(i-n)*(r-t),l=(e-t)*(o-n);return Math.abs(s-l)>=33306690738754716e-32*Math.abs(s+l)?s-l:0}function Q(t,n,e,i,r,o){return(K(r,o,t,n,e,i)||K(t,n,e,i,r,o)||K(e,i,r,o,t,n))<0}function tt(t,n,e,i,r,o,s,l){const u=t-s,h=n-l,a=e-s,c=i-l,f=r-s,d=o-l,y=a*a+c*c,p=f*f+d*d;return u*(c*p-y*d)-h*(a*p-y*f)+(u*u+h*h)*(a*d-c*f)<0}function nt(t,n,e,i,r,o){const s=e-t,l=i-n,u=r-t,h=o-n,a=s*s+l*l,c=u*u+h*h,f=.5/(s*h-l*u),d=(h*a-l*c)*f,y=(s*c-u*a)*f;return d*d+y*y}function et(t,n,e,i){if(i-e<=20)for(let r=e+1;r<=i;r++){const i=t[r],o=n[i];let s=r-1;for(;s>=e&&n[t[s]]>o;)t[s+1]=t[s--];t[s+1]=i}else{let r=e+1,o=i;it(t,e+i>>1,r),n[t[e]]>n[t[i]]&&it(t,e,i),n[t[r]]>n[t[i]]&&it(t,r,i),n[t[e]]>n[t[r]]&&it(t,e,r);const s=t[r],l=n[s];for(;;){do{r++}while(n[t[r]]<l);do{o--}while(n[t[o]]>l);if(o<r)break;it(t,r,o)}t[e+1]=t[o],t[o]=s,i-r+1>=o-e?(et(t,n,r,i),et(t,n,e,o-1)):(et(t,n,e,o-1),et(t,n,r,i))}}function it(t,n,e){const i=t[n];t[n]=t[e],t[e]=i}function rt(t){return t[0]}function ot(t){return t[1]}class st{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,e){const i=(t=+t)+(e=+e),r=n=+n;if(e<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${r}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-r)>1e-6)&&(this._+="L"+i+","+r),e&&(this._+=`A${e},${e},0,1,1,${t-e},${n}A${e},${e},0,1,1,${this._x1=i},${this._y1=r}`)}rect(t,n,e,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+e}v${+i}h${-e}Z`}value(){return this._||null}}class lt{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class ut{constructor(t,[n,e,i,r]=[0,0,960,500]){if(!((i=+i)>=(n=+n)&&(r=+r)>=(e=+e)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=i,this.xmin=n,this.ymax=r,this.ymin=e,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:e},vectors:i}=this,r=this.circumcenters=this._circumcenters.subarray(0,e.length/3*2);for(let n,i,o=0,s=0,l=e.length;o<l;o+=3,s+=2){const l=2*e[o],u=2*e[o+1],h=2*e[o+2],a=t[l],c=t[l+1],f=t[h],d=t[h+1],y=t[u]-a,p=t[u+1]-c,v=f-a,g=d-c,b=y*y+p*p,w=v*v+g*g,x=2*(y*g-p*v);if(x)if(Math.abs(x)<1e-8)n=(a+f)/2,i=(c+d)/2;else{const t=1/x;n=a+(g*b-p*w)*t,i=c+(y*w-v*b)*t}else n=(a+f)/2-1e8*g,i=(c+d)/2+1e8*v;r[s]=n,r[s+1]=i}let o,s,l,u=n[n.length-1],h=4*u,a=t[2*u],c=t[2*u+1];i.fill(0);for(let e=0;e<n.length;++e)u=n[e],o=h,s=a,l=c,h=4*u,a=t[2*u],c=t[2*u+1],i[o+2]=i[h]=l-c,i[o+3]=i[h+1]=a-s}render(t){const n=null==t?t=new st:void 0,{delaunay:{halfedges:e,inedges:i,hull:r},circumcenters:o,vectors:s}=this;if(r.length<=1)return null;for(let n=0,i=e.length;n<i;++n){const i=e[n];if(i<n)continue;const r=2*Math.floor(n/3),s=2*Math.floor(i/3);this._renderSegment(o[r],o[r+1],o[s],o[s+1],t)}let l,u=r[r.length-1];for(let n=0;n<r.length;++n){l=u,u=r[n];const e=2*Math.floor(i[u]/3),h=o[e],a=o[e+1],c=4*l,f=this._project(h,a,s[c+2],s[c+3]);f&&this._renderSegment(h,a,f[0],f[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new st:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const e=null==n?n=new st:void 0,i=this._clip(t);if(null===i||!i.length)return;n.moveTo(i[0],i[1]);let r=i.length;for(;i[0]===i[r-2]&&i[1]===i[r-1]&&r>1;)r-=2;for(let t=2;t<r;t+=2)i[t]===i[t-2]&&i[t+1]===i[t-1]||n.lineTo(i[t],i[t+1]);return n.closePath(),e&&e.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,e=t.length/2;n<e;++n){const t=this.cellPolygon(n);t&&(t.index=n,yield t)}}cellPolygon(t){const n=new lt;return this.renderCell(t,n),n.value()}_renderSegment(t,n,e,i,r){let o;const s=this._regioncode(t,n),l=this._regioncode(e,i);0===s&&0===l?(r.moveTo(t,n),r.lineTo(e,i)):(o=this._clipSegment(t,n,e,i,s,l))&&(r.moveTo(o[0],o[1]),r.lineTo(o[2],o[3]))}contains(t,n,e){return(n=+n)==n&&(e=+e)==e&&this.delaunay._step(t,n,e)===t}*neighbors(t){const n=this._clip(t);if(n)for(const e of this.delaunay.neighbors(t)){const t=this._clip(e);if(t)t:for(let i=0,r=n.length;i<r;i+=2)for(let o=0,s=t.length;o<s;o+=2)if(n[i]==t[o]&&n[i+1]==t[o+1]&&n[(i+2)%r]==t[(o+s-2)%s]&&n[(i+3)%r]==t[(o+s-1)%s]){yield e;break t}}}_cell(t){const{circumcenters:n,delaunay:{inedges:e,halfedges:i,triangles:r}}=this,o=e[t];if(-1===o)return null;const s=[];let l=o;do{const e=Math.floor(l/3);if(s.push(n[2*e],n[2*e+1]),l=l%3==2?l-2:l+1,r[l]!==t)break;l=i[l]}while(l!==o&&-1!==l);return s}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:e}=this,i=4*t;return e[i]||e[i+1]?this._clipInfinite(t,n,e[i],e[i+1],e[i+2],e[i+3]):this._clipFinite(t,n)}_clipFinite(t,n){const e=n.length;let i,r,o,s,l,u=null,h=n[e-2],a=n[e-1],c=this._regioncode(h,a);for(let f=0;f<e;f+=2)if(i=h,r=a,h=n[f],a=n[f+1],o=c,c=this._regioncode(h,a),0===o&&0===c)s=l,l=0,u?u.push(h,a):u=[h,a];else{let n,e,f,d,y;if(0===o){if(null===(n=this._clipSegment(i,r,h,a,o,c)))continue;[e,f,d,y]=n}else{if(null===(n=this._clipSegment(h,a,i,r,c,o)))continue;[d,y,e,f]=n,s=l,l=this._edgecode(e,f),s&&l&&this._edge(t,s,l,u,u.length),u?u.push(e,f):u=[e,f]}s=l,l=this._edgecode(d,y),s&&l&&this._edge(t,s,l,u,u.length),u?u.push(d,y):u=[d,y]}if(u)s=l,l=this._edgecode(u[0],u[1]),s&&l&&this._edge(t,s,l,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(t,n,e,i,r,o){for(;;){if(0===r&&0===o)return[t,n,e,i];if(r&o)return null;let s,l,u=r||o;8&u?(s=t+(e-t)*(this.ymax-n)/(i-n),l=this.ymax):4&u?(s=t+(e-t)*(this.ymin-n)/(i-n),l=this.ymin):2&u?(l=n+(i-n)*(this.xmax-t)/(e-t),s=this.xmax):(l=n+(i-n)*(this.xmin-t)/(e-t),s=this.xmin),r?r=this._regioncode(t=s,n=l):o=this._regioncode(e=s,i=l)}}_clipInfinite(t,n,e,i,r,o){let s,l=Array.from(n);if((s=this._project(l[0],l[1],e,i))&&l.unshift(s[0],s[1]),(s=this._project(l[l.length-2],l[l.length-1],r,o))&&l.push(s[0],s[1]),l=this._clipFinite(t,l))for(let n,e=0,i=l.length,r=this._edgecode(l[i-2],l[i-1]);e<i;e+=2)n=r,r=this._edgecode(l[e],l[e+1]),n&&r&&(e=this._edge(t,n,r,l,e),i=l.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(t,n,e,i,r){for(;n!==e;){let e,o;switch(n){case 5:n=4;continue;case 4:n=6,e=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,e=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,e=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,e=this.xmin,o=this.ymin}i[r]===e&&i[r+1]===o||!this.contains(t,e,o)||(i.splice(r,0,e,o),r+=2)}if(i.length>4)for(let t=0;t<i.length;t+=2){const n=(t+2)%i.length,e=(t+4)%i.length;(i[t]===i[n]&&i[n]===i[e]||i[t+1]===i[n+1]&&i[n+1]===i[e+1])&&(i.splice(n,2),t-=2)}return r}_project(t,n,e,i){let r,o,s,l=1/0;if(i<0){if(n<=this.ymin)return null;(r=(this.ymin-n)/i)<l&&(s=this.ymin,o=t+(l=r)*e)}else if(i>0){if(n>=this.ymax)return null;(r=(this.ymax-n)/i)<l&&(s=this.ymax,o=t+(l=r)*e)}if(e>0){if(t>=this.xmax)return null;(r=(this.xmax-t)/e)<l&&(o=this.xmax,s=n+(l=r)*i)}else if(e<0){if(t<=this.xmin)return null;(r=(this.xmin-t)/e)<l&&(o=this.xmin,s=n+(l=r)*i)}return[o,s]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const ht=2*Math.PI,at=Math.pow;function ct(t){return t[0]}function ft(t){return t[1]}function dt(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}class yt{static from(t,n=ct,e=ft,i){return new yt("length"in t?function(t,n,e,i){const r=t.length,o=new Float64Array(2*r);for(let s=0;s<r;++s){const r=t[s];o[2*s]=n.call(i,r,s,t),o[2*s+1]=e.call(i,r,s,t)}return o}(t,n,e,i):Float64Array.from(function*(t,n,e,i){let r=0;for(const o of t)yield n.call(i,o,r,t),yield e.call(i,o,r,t),++r}(t,n,e,i)))}constructor(t){this._delaunator=new q(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:n,coords:e}=t;for(let t=0;t<n.length;t+=3){const i=2*n[t],r=2*n[t+1],o=2*n[t+2];if((e[o]-e[i])*(e[r+1]-e[i+1])-(e[r]-e[i])*(e[o+1]-e[i+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},((t,n)=>n)).sort(((t,e)=>n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]));const t=this.collinear[0],e=this.collinear[this.collinear.length-1],i=[n[2*t],n[2*t+1],n[2*e],n[2*e+1]],r=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]);for(let t=0,e=n.length/2;t<e;++t){const e=dt(n[2*t],n[2*t+1],r);n[2*t]=e[0],n[2*t+1]=e[1]}this._delaunator=new q(n)}else delete this.collinear;const e=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,r=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let t=0,n=e.length;t<n;++t){const n=r[t%3==2?t-2:t+1];-1!==e[t]&&-1!==o[n]||(o[n]=t)}for(let t=0,n=i.length;t<n;++t)s[i[t]]=t;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],o[i[0]]=1,2===i.length&&(o[i[1]]=0))}voronoi(t){return new ut(this,t)}*neighbors(t){const{inedges:n,hull:e,_hullIndex:i,halfedges:r,triangles:o,collinear:s}=this;if(s){const n=s.indexOf(t);return n>0&&(yield s[n-1]),void(n<s.length-1&&(yield s[n+1]))}const l=n[t];if(-1===l)return;let u=l,h=-1;do{if(yield h=o[u],u=u%3==2?u-2:u+1,o[u]!==t)return;if(u=r[u],-1===u){const n=e[(i[t]+1)%e.length];return void(n!==h&&(yield n))}}while(u!==l)}find(t,n,e=0){if((t=+t)!=t||(n=+n)!=n)return-1;const i=e;let r;for(;(r=this._step(e,t,n))>=0&&r!==e&&r!==i;)e=r;return r}_step(t,n,e){const{inedges:i,hull:r,_hullIndex:o,halfedges:s,triangles:l,points:u}=this;if(-1===i[t]||!u.length)return(t+1)%(u.length>>1);let h=t,a=at(n-u[2*t],2)+at(e-u[2*t+1],2);const c=i[t];let f=c;do{let i=l[f];const c=at(n-u[2*i],2)+at(e-u[2*i+1],2);if(c<a&&(a=c,h=i),f=f%3==2?f-2:f+1,l[f]!==t)break;if(f=s[f],-1===f){if(f=r[(o[t]+1)%r.length],f!==i&&at(n-u[2*f],2)+at(e-u[2*f+1],2)<a)return f;break}}while(f!==c);return h}render(t){const n=null==t?t=new st:void 0,{points:e,halfedges:i,triangles:r}=this;for(let n=0,o=i.length;n<o;++n){const o=i[n];if(o<n)continue;const s=2*r[n],l=2*r[o];t.moveTo(e[s],e[s+1]),t.lineTo(e[l],e[l+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n=2){const e=null==t?t=new st:void 0,{points:i}=this;for(let e=0,r=i.length;e<r;e+=2){const r=i[e],o=i[e+1];t.moveTo(r+n,o),t.arc(r,o,n,0,ht)}return e&&e.value()}renderHull(t){const n=null==t?t=new st:void 0,{hull:e,points:i}=this,r=2*e[0],o=e.length;t.moveTo(i[r],i[r+1]);for(let n=1;n<o;++n){const r=2*e[n];t.lineTo(i[r],i[r+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new lt;return this.renderHull(t),t.value()}renderTriangle(t,n){const e=null==n?n=new st:void 0,{points:i,triangles:r}=this,o=2*r[t*=3],s=2*r[t+1],l=2*r[t+2];return n.moveTo(i[o],i[o+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[l],i[l+1]),n.closePath(),e&&e.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,e=t.length/3;n<e;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new lt;return this.renderTriangle(t,n),n.value()}}var pt=function(t){return"function"==typeof t?t:function(n){return n[t]}},vt=function(n){var e=n.points,i=n.x,r=n.y,o=n.width,s=n.height,l=n.debug,u=t.useMemo((function(){return function(t){var n=t.points,e=t.x,i=t.y,r=void 0===i?"y":i,o=pt(void 0===e?"x":e),s=pt(r);return n.map((function(t){return[o(t),s(t)]}))}({points:e,x:i,y:r})}),[e,i,r]);return t.useMemo((function(){return function(t){var n=t.width,e=t.height,i=t.debug,r=yt.from(t.points),o=i?r.voronoi([0,0,n,e]):void 0;return{delaunay:r,voronoi:o}}({points:u,width:o,height:s,debug:l})}),[u,o,s,l])},gt=function(i){var r=i.nodes,o=i.width,s=i.height,l=i.x,u=i.y,h=i.onMouseEnter,a=i.onMouseMove,c=i.onMouseLeave,f=i.onClick,d=i.debug,y=t.useRef(null),p=t.useState(null),v=p[0],g=p[1],b=vt({points:r,x:l,y:u,width:o,height:s,debug:d}),w=b.delaunay,x=b.voronoi,m=t.useMemo((function(){if(d&&x)return x.render()}),[d,x]),M=t.useCallback((function(t){if(!y.current)return[null,null];var e=n(y.current,t),i=w.find(e[0],e[1]);return[i,void 0!==i?r[i]:null]}),[y,w]),S=t.useCallback((function(t){var n=M(t),e=n[1];g(n[0]),e&&(null==h||h(e,t))}),[M,g,h]),k=t.useCallback((function(t){var n=M(t),e=n[1];g(n[0]),e&&(null==a||a(e,t))}),[M,g,a]),C=t.useCallback((function(t){if(g(null),c){var n=void 0;null!==v&&(n=r[v]),n&&c(n,t)}}),[g,v,c,r]),A=t.useCallback((function(t){var n=M(t),e=n[1];g(n[0]),e&&(null==f||f(e,t))}),[M,g,f]);return e.jsxs("g",{ref:y,children:[d&&x&&e.jsxs(e.Fragment,{children:[e.jsx("path",{d:m,stroke:"red",strokeWidth:1,opacity:.75}),null!==v&&e.jsx("path",{fill:"pink",opacity:.35,d:x.renderCell(v)})]}),e.jsx("rect",{width:o,height:s,fill:"red",opacity:0,style:{cursor:"auto"},onMouseEnter:S,onMouseMove:k,onMouseLeave:C,onClick:A})]})};function bt(){return(bt=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}).apply(this,arguments)}var wt=function(t){var n=t.point;return e.jsx(f,{id:e.jsxs("span",{children:["x: ",e.jsx("strong",{children:n.data.xFormatted}),", y:"," ",e.jsx("strong",{children:n.data.yFormatted})]}),enableChip:!0,color:n.serieColor})};wt.propTypes={point:i.object.isRequired};var xt=t.memo(wt),mt=function(t){var n=t.slice,i=t.axis,r=d(),o="x"===i?"y":"x";return e.jsx(y,{rows:n.points.map((function(t){return[e.jsx(p,{color:t.serieColor,style:r.tooltip.chip},"chip"),t.serieId,e.jsx("span",{style:r.tooltip.tableCellValue,children:t.data[o+"Formatted"]},"value")]}))})};mt.propTypes={slice:i.object.isRequired,axis:i.oneOf(["x","y"]).isRequired};var Mt=t.memo(mt),St={data:i.arrayOf(i.shape({id:i.oneOfType([i.string,i.number]).isRequired,data:i.arrayOf(i.shape({x:i.oneOfType([i.number,i.string,i.instanceOf(Date)]),y:i.oneOfType([i.number,i.string,i.instanceOf(Date)])})).isRequired})).isRequired,xScale:i.object.isRequired,xFormat:i.oneOfType([i.func,i.string]),yScale:i.object.isRequired,yFormat:i.oneOfType([i.func,i.string]),layers:i.arrayOf(i.oneOfType([i.oneOf(["grid","markers","axes","areas","crosshair","lines","slices","points","mesh","legends"]),i.func])).isRequired,curve:r.isRequired,axisTop:O,axisRight:O,axisBottom:O,axisLeft:O,enableGridX:i.bool.isRequired,enableGridY:i.bool.isRequired,gridXValues:i.oneOfType([i.number,i.arrayOf(i.oneOfType([i.number,i.string,i.instanceOf(Date)]))]),gridYValues:i.oneOfType([i.number,i.arrayOf(i.oneOfType([i.number,i.string,i.instanceOf(Date)]))]),enablePoints:i.bool.isRequired,pointSymbol:i.func,pointSize:i.number.isRequired,pointColor:i.any.isRequired,pointBorderWidth:i.number.isRequired,pointBorderColor:i.any.isRequired,enablePointLabel:i.bool.isRequired,pointLabel:i.oneOfType([i.string,i.func]).isRequired,markers:i.arrayOf(i.shape({axis:i.oneOf(["x","y"]).isRequired,value:i.oneOfType([i.number,i.string,i.instanceOf(Date)]).isRequired,style:i.object})),colors:o.isRequired,enableArea:i.bool.isRequired,areaOpacity:i.number.isRequired,areaBlendMode:s.isRequired,areaBaselineValue:i.oneOfType([i.number,i.string,i.instanceOf(Date)]).isRequired,lineWidth:i.number.isRequired,legends:i.arrayOf(i.shape(l)).isRequired,isInteractive:i.bool.isRequired,debugMesh:i.bool.isRequired,tooltip:i.oneOfType([i.func,i.object]).isRequired,enableSlices:i.oneOf(["x","y",!1]).isRequired,debugSlices:i.bool.isRequired,sliceTooltip:i.oneOfType([i.func,i.object]).isRequired,enableCrosshair:i.bool.isRequired,crosshairType:i.string.isRequired},kt=bt({},St,{enablePointLabel:i.bool.isRequired,role:i.string.isRequired,useMesh:i.bool.isRequired},u,h),Ct=bt({pixelRatio:i.number.isRequired},St),At={curve:"linear",xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto"},layers:["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"],axisBottom:{},axisLeft:{},enableGridX:!0,enableGridY:!0,enablePoints:!0,pointSize:6,pointColor:{from:"color"},pointBorderWidth:0,pointBorderColor:{theme:"background"},enablePointLabel:!1,pointLabel:"yFormatted",colors:{scheme:"nivo"},enableArea:!1,areaBaselineValue:0,areaOpacity:.2,areaBlendMode:"normal",lineWidth:2,legends:[],isInteractive:!0,tooltip:xt,enableSlices:!1,debugSlices:!1,sliceTooltip:Mt,debugMesh:!1,enableCrosshair:!0,crosshairType:"bottom-left"},_t=bt({},At,{enablePointLabel:!1,useMesh:!1,animate:!0,motionConfig:"gentle",defs:[],fill:[],role:"img"}),Bt=bt({},At,{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),Pt=function(n){var e=n.curve;return t.useMemo((function(){return X().defined((function(t){return null!==t.x&&null!==t.y})).x((function(t){return t.x})).y((function(t){return t.y})).curve(M(e))}),[e])},Wt=function(n){var e=n.curve,i=n.yScale,r=n.areaBaselineValue;return t.useMemo((function(){return function(){var t=z,n=null,e=j(0),i=R,r=j(!0),o=null,s=Y,l=null;function u(u){var h,a,c,f,d,y=u.length,p=!1,v=new Array(y),g=new Array(y);for(null==o&&(l=s(d=V())),h=0;h<=y;++h){if(!(h<y&&r(f=u[h],h,u))===p)if(p=!p)a=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),c=h-1;c>=a;--c)l.point(v[c],g[c]);l.lineEnd(),l.areaEnd()}p&&(v[h]=+t(f,h,u),g[h]=+e(f,h,u),l.point(n?+n(f,h,u):v[h],i?+i(f,h,u):g[h]))}if(d)return l=null,d+""||null}function h(){return X().defined(r).curve(s).context(o)}return u.x=function(e){return arguments.length?(t="function"==typeof e?e:j(+e),n=null,u):t},u.x0=function(n){return arguments.length?(t="function"==typeof n?n:j(+n),u):t},u.x1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:j(+t),u):n},u.y=function(t){return arguments.length?(e="function"==typeof t?t:j(+t),i=null,u):e},u.y0=function(t){return arguments.length?(e="function"==typeof t?t:j(+t),u):e},u.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:j(+t),u):i},u.lineX0=u.lineY0=function(){return h().x(t).y(e)},u.lineY1=function(){return h().x(t).y(i)},u.lineX1=function(){return h().x(n).y(e)},u.defined=function(t){return arguments.length?(r="function"==typeof t?t:j(!!t),u):r},u.curve=function(t){return arguments.length?(s=t,null!=o&&(l=s(o)),u):s},u.context=function(t){return arguments.length?(null==t?o=l=null:l=s(o=t),u):o},u}().defined((function(t){return null!==t.x&&null!==t.y})).x((function(t){return t.x})).y1((function(t){return t.y})).curve(M(e)).y0(i(r))}),[e,i,r])},$t=function(n){var e=n.data,i=n.xScale,r=void 0===i?_t.xScale:i,o=n.yScale,s=void 0===o?_t.yScale:o,l=n.yFormat,u=n.width,h=n.height,a=n.colors,c=void 0===a?_t.colors:a,f=n.curve,y=void 0===f?_t.curve:f,p=n.areaBaselineValue,v=void 0===p?_t.areaBaselineValue:p,g=n.pointColor,b=void 0===g?_t.pointColor:g,w=n.pointBorderColor,x=void 0===w?_t.pointBorderColor:w,m=n.enableSlices,M=void 0===m?_t.enableSlicesTooltip:m,S=C(n.xFormat),k=C(l),B=A(c,"id"),P=d(),W=_(b,P),$=_(x,P),F=t.useState([]),L=F[0],G=F[1],O=t.useMemo((function(){return T(e.filter((function(t){return-1===L.indexOf(t.id)})),r,s,u,h)}),[e,L,r,s,u,h]),E=O.xScale,I=O.yScale,D=O.series,U=t.useMemo((function(){var t=e.map((function(t){return{id:t.id,label:t.id,color:B(t)}})),n=t.map((function(t){return bt({},D.find((function(n){return n.id===t.id})),{color:t.color})})).filter((function(t){return Boolean(t.id)}));return{legendData:t.map((function(t){return bt({},t,{hidden:!n.find((function(n){return n.id===t.id}))})})).reverse(),series:n}}),[e,D,B]),V=U.legendData,j=U.series,H=t.useCallback((function(t){G((function(n){return n.indexOf(t)>-1?n.filter((function(n){return n!==t})):[].concat(n,[t])}))}),[]),Y=function(n){var e=n.series,i=n.getPointColor,r=n.getPointBorderColor,o=n.formatX,s=n.formatY;return t.useMemo((function(){return e.reduce((function(t,n){return[].concat(t,n.data.filter((function(t){return null!==t.position.x&&null!==t.position.y})).map((function(e,l){var u={id:n.id+"."+l,index:t.length+l,serieId:n.id,serieColor:n.color,x:e.position.x,y:e.position.y};return u.color=i(n),u.borderColor=r(u),u.data=bt({},e.data,{xFormatted:o(e.data.x),yFormatted:s(e.data.y)}),u})))}),[])}),[e,i,r,o,s])}({series:j,getPointColor:W,getPointBorderColor:$,formatX:S,formatY:k}),z=function(n){var e=n.enableSlices,i=n.points,r=n.width,o=n.height;return t.useMemo((function(){if(!1===e)return[];if("x"===e){var t=new Map;return i.forEach((function(n){null!==n.data.x&&null!==n.data.y&&(t.has(n.x)?t.get(n.x).push(n):t.set(n.x,[n]))})),Array.from(t.entries()).sort((function(t,n){return t[0]-n[0]})).map((function(t,n,e){var i,s=t[0],l=e[n-1],u=e[n+1];return{id:s,x0:i=l?s-(s-l[0])/2:s,x:s,y0:0,y:0,width:u?s-i+(u[0]-s)/2:r-i,height:o,points:t[1].reverse()}}))}if("y"===e){var n=new Map;return i.forEach((function(t){null!==t.data.x&&null!==t.data.y&&(n.has(t.y)?n.get(t.y).push(t):n.set(t.y,[t]))})),Array.from(n.entries()).sort((function(t,n){return t[0]-n[0]})).map((function(t,n,e){var i,s=t[0],l=e[n-1],u=e[n+1];return{id:s,x0:0,x:0,y0:i=l?s-(s-l[0])/2:s,y:s,width:r,height:u?s-i+(u[0]-s)/2:o-i,points:t[1].reverse()}}))}}),[e,i])}({enableSlices:M,points:Y,width:u,height:h});return{legendData:V,toggleSerie:H,lineGenerator:Pt({curve:y}),areaGenerator:Wt({curve:y,yScale:I,areaBaselineValue:v}),getColor:B,series:j,xScale:E,yScale:I,slices:z,points:Y}},Ft=function(t){var n=t.areaBlendMode,i=t.areaOpacity,r=t.color,o=t.fill,s=t.path,l=B(),u=l.animate,h=l.config,a=v(s),c=P({color:r,config:h,immediate:!u});return e.jsx(g.path,{d:a,fill:o||c.color,fillOpacity:i,strokeWidth:0,style:{mixBlendMode:n}})};Ft.propTypes={areaBlendMode:s.isRequired,areaOpacity:i.number.isRequired,color:i.string,fill:i.string,path:i.string.isRequired};var Lt=function(t){var n=t.areaGenerator,i=t.areaOpacity,r=t.areaBlendMode,o=t.lines.slice(0).reverse();return e.jsx("g",{children:o.map((function(t){return e.jsx(Ft,bt({path:n(t.data.map((function(t){return t.position})))},bt({areaOpacity:i,areaBlendMode:r},t)),t.id)}))})};Lt.propTypes={areaGenerator:i.func.isRequired,areaOpacity:i.number.isRequired,areaBlendMode:s.isRequired,lines:i.arrayOf(i.object).isRequired};var Gt=t.memo(Lt),Ot=function(n){var i=n.lineGenerator,r=n.points,o=n.color,s=n.thickness,l=t.useMemo((function(){return i(r)}),[i,r]),u=v(l);return e.jsx(g.path,{d:u,fill:"none",strokeWidth:s,stroke:o})};Ot.propTypes={points:i.arrayOf(i.shape({x:i.oneOfType([i.string,i.number]),y:i.oneOfType([i.string,i.number])})),lineGenerator:i.func.isRequired,color:i.string.isRequired,thickness:i.number.isRequired};var Et=t.memo(Ot),It=function(t){var n=t.lineGenerator,i=t.lineWidth;return t.lines.slice(0).reverse().map((function(t){var r=t.id,o=t.color;return e.jsx(Et,{id:r,points:t.data.map((function(t){return t.position})),lineGenerator:n,color:o,thickness:i},r)}))};It.propTypes={lines:i.arrayOf(i.shape({id:i.oneOfType([i.string,i.number]).isRequired,color:i.string.isRequired,data:i.arrayOf(i.shape({data:i.shape({x:i.oneOfType([i.string,i.number,i.instanceOf(Date)]),y:i.oneOfType([i.string,i.number,i.instanceOf(Date)])}).isRequired,position:i.shape({x:i.number,y:i.number}).isRequired})).isRequired})).isRequired,lineWidth:i.number.isRequired,lineGenerator:i.func.isRequired};var Tt=t.memo(It),Dt=function(n){var i=n.slice,r=n.axis,o=n.debug,s=n.tooltip,l=n.isCurrent,u=n.setCurrent,h=b(),a=h.showTooltipFromEvent,c=h.hideTooltip,f=t.useCallback((function(n){a(t.createElement(s,{slice:i,axis:r}),n,"right"),u(i)}),[a,s,i]),d=t.useCallback((function(n){a(t.createElement(s,{slice:i,axis:r}),n,"right")}),[a,s,i]),y=t.useCallback((function(){c(),u(null)}),[c]);return e.jsx("rect",{x:i.x0,y:i.y0,width:i.width,height:i.height,stroke:"red",strokeWidth:o?1:0,strokeOpacity:.75,fill:"red",fillOpacity:l&&o?.35:0,onMouseEnter:f,onMouseMove:d,onMouseLeave:y})};Dt.propTypes={slice:i.object.isRequired,axis:i.oneOf(["x","y"]).isRequired,debug:i.bool.isRequired,height:i.number.isRequired,tooltip:i.oneOfType([i.func,i.object]),isCurrent:i.bool.isRequired,setCurrent:i.func.isRequired};var Ut=t.memo(Dt),Vt=function(t){var n=t.axis,i=t.debug,r=t.height,o=t.tooltip,s=t.current,l=t.setCurrent;return t.slices.map((function(t){return e.jsx(Ut,{slice:t,axis:n,debug:i,height:r,tooltip:o,setCurrent:l,isCurrent:null!==s&&s.id===t.id},t.id)}))};Vt.propTypes={slices:i.arrayOf(i.shape({id:i.oneOfType([i.number,i.string,i.instanceOf(Date)]).isRequired,x:i.number.isRequired,y:i.number.isRequired,points:i.arrayOf(i.object).isRequired})).isRequired,axis:i.oneOf(["x","y"]).isRequired,debug:i.bool.isRequired,height:i.number.isRequired,tooltip:i.oneOfType([i.func,i.object]).isRequired,current:i.object,setCurrent:i.func.isRequired};var jt=t.memo(Vt),Ht=function(t){var n=t.points,i=t.symbol,r=t.size,o=t.borderWidth,s=t.enableLabel,l=t.label,u=t.labelYOffset,h=d(),a=w(l),c=n.reverse().map((function(t){return{id:t.id,x:t.x,y:t.y,datum:t.data,fill:t.color,stroke:t.borderColor,label:s?a(t.data):null}}));return e.jsx("g",{children:c.map((function(t){return e.jsx(x,{x:t.x,y:t.y,datum:t.datum,symbol:i,size:r,color:t.fill,borderWidth:o,borderColor:t.stroke,label:t.label,labelYOffset:u,theme:h},t.id)}))})};Ht.propTypes={points:i.arrayOf(i.object),symbol:i.func,size:i.number.isRequired,color:i.func.isRequired,borderWidth:i.number.isRequired,borderColor:i.func.isRequired,enableLabel:i.bool.isRequired,label:i.oneOfType([i.string,i.func]).isRequired,labelYOffset:i.number};var Yt=t.memo(Ht),zt=function(n){var i=n.points,r=n.width,o=n.height,s=n.margin,l=n.setCurrent,u=n.onMouseEnter,h=n.onMouseMove,a=n.onMouseLeave,c=n.onClick,f=n.tooltip,d=n.debug,y=b(),p=y.showTooltipAt,v=y.hideTooltip,g=t.useCallback((function(n,e){p(t.createElement(f,{point:n}),[n.x+s.left,n.y+s.top],"top"),l(n),u&&u(n,e)}),[l,p,f,u,s]),w=t.useCallback((function(n,e){p(t.createElement(f,{point:n}),[n.x+s.left,n.y+s.top],"top"),l(n),h&&h(n,e)}),[l,p,f,h]),x=t.useCallback((function(t,n){v(),l(null),a&&a(t,n)}),[v,l,a]),m=t.useCallback((function(t,n){c&&c(t,n)}),[c]);return e.jsx(gt,{nodes:i,width:r,height:o,onMouseEnter:g,onMouseMove:w,onMouseLeave:x,onClick:m,debug:d})};zt.propTypes={points:i.arrayOf(i.object).isRequired,width:i.number.isRequired,height:i.number.isRequired,margin:i.object.isRequired,setCurrent:i.func.isRequired,onMouseEnter:i.func,onMouseMove:i.func,onMouseLeave:i.func,onClick:i.func,tooltip:i.oneOfType([i.func,i.object]).isRequired,debug:i.bool.isRequired};var Rt=t.memo(zt),Xt=function(n){var i=n.data,r=n.xScale,o=n.xFormat,s=n.yScale,l=n.yFormat,u=n.layers,h=n.curve,a=n.areaBaselineValue,c=n.colors,f=n.axisTop,y=n.axisRight,p=n.axisBottom,v=n.axisLeft,g=n.enableGridX,b=n.enableGridY,w=n.gridXValues,x=n.gridYValues,M=n.lineWidth,S=n.enableArea,k=n.areaOpacity,C=n.areaBlendMode,A=n.enablePoints,B=n.pointSymbol,P=n.pointSize,O=n.pointColor,E=n.pointBorderWidth,I=n.pointBorderColor,T=n.enablePointLabel,V=n.pointLabel,j=n.pointLabelYOffset,H=n.defs,Y=n.fill,z=n.markers,R=n.legends,X=n.isInteractive,N=n.useMesh,Z=n.debugMesh,q=n.onMouseEnter,J=n.onMouseMove,K=n.onMouseLeave,Q=n.onClick,tt=n.tooltip,nt=n.enableSlices,et=n.debugSlices,it=n.sliceTooltip,rt=n.enableCrosshair,ot=n.crosshairType,st=n.role,lt=m(n.width,n.height,n.margin),ut=lt.margin,ht=lt.innerWidth,at=lt.innerHeight,ct=lt.outerWidth,ft=lt.outerHeight,dt=$t({data:i,xScale:r,xFormat:o,yScale:s,yFormat:l,width:ht,height:at,colors:c,curve:h,areaBaselineValue:a,pointColor:O,pointBorderColor:I,enableSlices:nt}),yt=dt.legendData,pt=dt.toggleSerie,vt=dt.lineGenerator,gt=dt.areaGenerator,wt=dt.series,xt=dt.xScale,mt=dt.yScale,Mt=dt.slices,St=dt.points,kt=d(),Ct=_(O,kt),At=_(I,kt),_t=t.useState(null),Bt=_t[0],Pt=_t[1],Wt=t.useState(null),Ft=Wt[0],Lt=Wt[1],Ot={grid:e.jsx(D,{theme:kt,width:ht,height:at,xScale:g?xt:null,yScale:b?mt:null,xValues:w,yValues:x},"grid"),markers:e.jsx(W,{markers:z,width:ht,height:at,xScale:xt,yScale:mt,theme:kt},"markers"),axes:e.jsx(U,{xScale:xt,yScale:mt,width:ht,height:at,theme:kt,top:f,right:y,bottom:p,left:v},"axes"),areas:null,lines:e.jsx(Tt,{lines:wt,lineGenerator:vt,lineWidth:M},"lines"),slices:null,points:null,crosshair:null,mesh:null,legends:R.map((function(t,n){return e.jsx($,bt({},t,{containerWidth:ht,containerHeight:at,data:t.data||yt,theme:kt,toggleSerie:t.toggleSerie?pt:void 0}),"legend."+n)}))},Et=F(H,wt,Y);return S&&(Ot.areas=e.jsx(Gt,{areaGenerator:gt,areaOpacity:k,areaBlendMode:C,lines:wt},"areas")),X&&!1!==nt&&(Ot.slices=e.jsx(jt,{slices:Mt,axis:nt,debug:et,height:at,tooltip:it,current:Ft,setCurrent:Lt},"slices")),A&&(Ot.points=e.jsx(Yt,{points:St,symbol:B,size:P,color:Ct,borderWidth:E,borderColor:At,enableLabel:T,label:V,labelYOffset:j},"points")),X&&rt&&(null!==Bt&&(Ot.crosshair=e.jsx(L,{width:ht,height:at,x:Bt.x,y:Bt.y,type:ot},"crosshair")),null!==Ft&&(Ot.crosshair=e.jsx(L,{width:ht,height:at,x:Ft.x,y:Ft.y,type:nt},"crosshair"))),X&&N&&!1===nt&&(Ot.mesh=e.jsx(Rt,{points:St,width:ht,height:at,margin:ut,current:Bt,setCurrent:Pt,onMouseEnter:q,onMouseMove:J,onMouseLeave:K,onClick:Q,tooltip:tt,debug:Z},"mesh")),e.jsx(G,{defs:Et,width:ct,height:ft,margin:ut,role:st,children:u.map((function(i,r){return"function"==typeof i?e.jsx(t.Fragment,{children:i(bt({},n,{innerWidth:ht,innerHeight:at,series:wt,slices:Mt,points:St,xScale:xt,yScale:mt,lineGenerator:vt,areaGenerator:gt,currentPoint:Bt,setCurrentPoint:Pt,currentSlice:Ft,setCurrentSlice:Lt}))},r):Ot[i]}))})};Xt.propTypes=kt,Xt.defaultProps=_t;var Nt=a(Xt),Zt=function(t){return e.jsx(c,{children:function(n){return e.jsx(Nt,bt({width:n.width,height:n.height},t))}})},qt=function(i){var r=i.width,o=i.height,s=i.margin,l=i.pixelRatio,u=i.data,h=i.xScale,a=i.xFormat,c=i.yScale,f=i.yFormat,y=i.curve,p=i.layers,v=i.colors,g=i.lineWidth,w=i.enableArea,x=i.areaBaselineValue,M=i.areaOpacity,C=i.enablePoints,A=i.pointSize,_=i.pointColor,B=i.pointBorderWidth,P=i.pointBorderColor,W=i.enableGridX,$=i.gridXValues,F=i.enableGridY,L=i.gridYValues,G=i.axisTop,O=i.axisRight,T=i.axisBottom,D=i.axisLeft,U=i.legends,V=i.isInteractive,j=i.debugMesh,H=i.onMouseLeave,Y=i.onClick,z=i.tooltip,R=i.canvasRef,X=t.useRef(null),N=m(r,o,s),Z=N.margin,q=N.innerWidth,J=N.innerHeight,K=N.outerWidth,Q=N.outerHeight,tt=d(),nt=t.useState(null),et=nt[0],it=nt[1],rt=$t({data:u,xScale:h,xFormat:a,yScale:c,yFormat:f,width:q,height:J,colors:v,curve:y,areaBaselineValue:x,pointColor:_,pointBorderColor:P}),ot=rt.lineGenerator,st=rt.areaGenerator,lt=rt.series,ut=rt.xScale,ht=rt.yScale,at=rt.points,ct=vt({points:at,width:q,height:J,debug:j}),ft=ct.delaunay,dt=ct.voronoi;t.useEffect((function(){R&&(R.current=X.current),X.current.width=K*l,X.current.height=Q*l;var t=X.current.getContext("2d");t.scale(l,l),t.fillStyle=tt.background,t.fillRect(0,0,K,Q),t.translate(Z.left,Z.top),p.forEach((function(n){if("function"==typeof n&&n({ctx:t,innerWidth:q,innerHeight:J,series:lt,points:at,xScale:ut,yScale:ht,lineWidth:g,lineGenerator:ot,areaGenerator:st,currentPoint:et,setCurrentPoint:it}),"grid"===n&&tt.grid.line.strokeWidth>0&&(t.lineWidth=tt.grid.line.strokeWidth,t.strokeStyle=tt.grid.line.stroke,W&&E(t,{width:q,height:J,scale:ut,axis:"x",values:$}),F&&E(t,{width:q,height:J,scale:ht,axis:"y",values:L})),"axes"===n&&I(t,{xScale:ut,yScale:ht,width:q,height:J,top:G,right:O,bottom:T,left:D,theme:tt}),"areas"===n&&!0===w&&(t.save(),t.globalAlpha=M,st.context(t),lt.forEach((function(n){t.fillStyle=n.color,t.beginPath(),st(n.data.map((function(t){return t.position}))),t.fill()})),t.restore()),"lines"===n&&(ot.context(t),lt.forEach((function(n){t.strokeStyle=n.color,t.lineWidth=g,t.beginPath(),ot(n.data.map((function(t){return t.position}))),t.stroke()}))),"points"===n&&!0===C&&A>0&&at.forEach((function(n){t.fillStyle=n.color,t.beginPath(),t.arc(n.x,n.y,A/2,0,2*Math.PI),t.fill(),B>0&&(t.strokeStyle=n.borderColor,t.lineWidth=B,t.stroke())})),"mesh"===n&&!0===j&&(function(t,n){t.save(),t.globalAlpha=.75,t.beginPath(),n.render(t),t.strokeStyle="red",t.lineWidth=1,t.stroke(),t.restore()}(t,dt),et&&function(t,n,e){t.save(),t.globalAlpha=.35,t.beginPath(),n.renderCell(e,t),t.fillStyle="red",t.fill(),t.restore()}(t,dt,et.index)),"legends"===n){var e=lt.map((function(t){return{id:t.id,label:t.id,color:t.color}})).reverse();U.forEach((function(n){S(t,bt({},n,{data:n.data||e,containerWidth:q,containerHeight:J,theme:tt}))}))}}))}),[X,K,Q,p,tt,ot,lt,ut,ht,W,$,F,L,G,O,T,D,U,at,C,A,et]);var yt=t.useCallback((function(t){var e=n(X.current,t),i=e[0],r=e[1];if(!k(Z.left,Z.top,q,J,i,r))return null;var o=ft.find(i-Z.left,r-Z.top);return at[o]}),[X,Z,q,J,ft]),pt=b(),gt=pt.showTooltipFromEvent,wt=pt.hideTooltip,xt=t.useCallback((function(n){var e=yt(n);it(e),e?gt(t.createElement(z,{point:e}),n):wt()}),[yt,it,gt,wt,z]),mt=t.useCallback((function(t){wt(),it(null),et&&H&&H(et,t)}),[wt,it,H]),Mt=t.useCallback((function(t){if(Y){var n=yt(t);n&&Y(n,t)}}),[yt,Y]);return e.jsx("canvas",{ref:X,width:K*l,height:Q*l,style:{width:K,height:Q,cursor:V?"auto":"normal"},onMouseEnter:V?xt:void 0,onMouseMove:V?xt:void 0,onMouseLeave:V?mt:void 0,onClick:V?Mt:void 0})};qt.propTypes=Ct,qt.defaultProps=Bt;var Jt=a(qt),Kt=t.forwardRef((function(t,n){return e.jsx(Jt,bt({},t,{canvasRef:n}))}));t.forwardRef((function(t,n){return e.jsx(c,{children:function(i){return e.jsx(Kt,bt({width:i.width,height:i.height},t,{ref:n}))}})}));export{Zt as P}